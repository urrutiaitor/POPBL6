package conexiones;

public class ConnRequestServer {

	String usuario;
	int contrasena;
	Ice.Communicator ic = null;
	
	
	public ConnRequestServer(String usuario, int contrasena) {
		super();
		this.usuario = usuario;
		this.contrasena = contrasena;
		
		ic = Ice.Util.initialize(args);
		Ice.ObjectPrx base = ic.stringToProxy("SimpleCalculator:tcp -h 127.0.0.1 -p 10000");
		// Ice.ObjectPrx base = ic.stringToProxy("SimpleCalculator:tcp -h
		// 172.17.100.24 -p 8000");
		utils.CalculatorPrx calculator = utils.CalculatorPrxHelper.checkedCast(base);
		if (calculator == null)
			throw new Error("Invalid proxy");
		n1 = calculator.gcd(2048, 384);
		n2 = calculator.gcd(n1, 704);
		System.out.println("mcd(384,704,2048)=" + n2);
		ic.destroy();
	}
	
	/*
	 * 
	 * Tiene que acceder al servidor, conectandose a traves de ICE y preguntar por el usuario y contrasena
	 * Si el usuario y contrasena es correcta, devuelve la conexion, si no FALSE
	 * 
	 */

	public ConnServer acceder() {
		// TODO Auto-generated method stub
		
		if(true) return new ConnServer(usuario);
		
		return null;
	}
}
